{"components":{"responses":{},"schemas":{"Collection":{"description":"A collection of photos","properties":{"description":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title"],"title":"Collection","type":"object","x-struct":null,"x-validate":null},"CollectionCreateRequest":{"description":"Parameters for creating a collection","properties":{"description":{"description":"Description of the collection","type":"string","x-struct":null,"x-validate":null},"title":{"description":"Title of the collection","type":"string","x-struct":null,"x-validate":null}},"required":["title"],"title":"CollectionCreateRequest","type":"object","x-struct":null,"x-validate":null},"CollectionListResponse":{"description":"List of collections for the current user","properties":{"data":{"items":{"description":"A collection of photos","properties":{"description":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title"],"title":"Collection","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"required":["data"],"title":"CollectionListResponse","type":"object","x-struct":null,"x-validate":null},"CollectionShowResponse":{"description":"A single collection with its photos","properties":{"data":{"allOf":[{"description":"A collection of photos","properties":{"description":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title"],"title":"Collection","type":"object","x-struct":null,"x-validate":null},{"properties":{"photos":{"items":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null}],"x-struct":null,"x-validate":null}},"required":["data"],"title":"CollectionShowResponse","type":"object","x-struct":null,"x-validate":null},"Photo":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"PhotoListResponse":{"description":"List of photos for the current user","properties":{"data":{"items":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"required":["data"],"title":"PhotoListResponse","type":"object","x-struct":null,"x-validate":null},"PhotoUploadRequest":{"description":"Multipart payload accepting a single photo","properties":{"collection_id":{"description":"Optional ID of the collection to add the photo to","type":"integer","x-struct":null,"x-validate":null},"photo":{"description":"Image file to process","format":"binary","type":"string","x-struct":null,"x-validate":null}},"required":["photo"],"title":"PhotoUploadRequest","type":"object","x-struct":null,"x-validate":null},"User":{"description":"A user account","properties":{"avatar_url":{"type":"string","x-struct":null,"x-validate":null},"email":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null}},"required":["id","email"],"title":"User","type":"object","x-struct":null,"x-validate":null},"UserResponse":{"description":"Response schema for a single user","properties":{"data":{"description":"A user account","properties":{"avatar_url":{"type":"string","x-struct":null,"x-validate":null},"email":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null}},"required":["id","email"],"title":"User","type":"object","x-struct":null,"x-validate":null}},"required":["data"],"title":"UserResponse","type":"object","x-struct":null,"x-validate":null},"ValidationErrors":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null},"type":"object","x-struct":null,"x-validate":null}},"required":["errors"],"title":"ValidationErrors","type":"object","x-struct":null,"x-validate":null}}},"info":{"title":"photowalk API","version":"1.0"},"openapi":"3.0.0","paths":{"/api/auth/request-magic-link":{"post":{"callbacks":{},"operationId":"PWeb.AuthController.request_magic_link","parameters":[],"requestBody":{"content":{"application/json":{"schema":{"properties":{"email":{"description":"User's email address","format":"email","type":"string","x-struct":null,"x-validate":null}},"required":["email"],"type":"object","x-struct":null,"x-validate":null}}},"description":"Email","required":false},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"message":{"type":"string","x-struct":null,"x-validate":null},"success":{"type":"boolean","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null}}},"description":"Magic link sent"},"403":{"content":{"application/json":{"schema":{"properties":{"error":{"type":"string","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null}}},"description":"Email not authorized"}},"tags":["auth"]}},"/api/collections":{"get":{"callbacks":{},"operationId":"PWeb.CollectionController.index","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"description":"List of collections for the current user","properties":{"data":{"items":{"description":"A collection of photos","properties":{"description":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title"],"title":"Collection","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"required":["data"],"title":"CollectionListResponse","type":"object","x-struct":null,"x-validate":null}}},"description":"Collections"}},"summary":"List collections","tags":["collections"]},"post":{"callbacks":{},"operationId":"PWeb.CollectionController.create","parameters":[],"requestBody":{"content":{"application/json":{"schema":{"description":"Parameters for creating a collection","properties":{"description":{"description":"Description of the collection","type":"string","x-struct":null,"x-validate":null},"title":{"description":"Title of the collection","type":"string","x-struct":null,"x-validate":null}},"required":["title"],"title":"CollectionCreateRequest","type":"object","x-struct":null,"x-validate":null}}},"description":"CollectionCreateRequest","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"description":"A single collection with its photos","properties":{"data":{"allOf":[{"description":"A collection of photos","properties":{"description":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title"],"title":"Collection","type":"object","x-struct":null,"x-validate":null},{"properties":{"photos":{"items":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null}],"x-struct":null,"x-validate":null}},"required":["data"],"title":"CollectionShowResponse","type":"object","x-struct":null,"x-validate":null}}},"description":"Created collection"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null},"type":"object","x-struct":null,"x-validate":null}},"required":["errors"],"title":"ValidationErrors","type":"object","x-struct":null,"x-validate":null}}},"description":"Validation errors"}},"summary":"Create a collection","tags":["collections"]}},"/api/collections/{id}":{"get":{"callbacks":{},"operationId":"PWeb.CollectionController.show","parameters":[{"description":"Collection ID","in":"path","name":"id","required":true,"schema":{"type":"integer","x-struct":null,"x-validate":null}}],"responses":{"200":{"content":{"application/json":{"schema":{"description":"A single collection with its photos","properties":{"data":{"allOf":[{"description":"A collection of photos","properties":{"description":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title"],"title":"Collection","type":"object","x-struct":null,"x-validate":null},{"properties":{"photos":{"items":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null}],"x-struct":null,"x-validate":null}},"required":["data"],"title":"CollectionShowResponse","type":"object","x-struct":null,"x-validate":null}}},"description":"Collection"},"404":{"content":{"application/json":{"schema":{"type":"object","x-struct":null,"x-validate":null}}},"description":"Collection not found"}},"summary":"Show a collection","tags":["collections"]}},"/api/photos":{"get":{"callbacks":{},"operationId":"PWeb.PhotoController.index","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"description":"List of photos for the current user","properties":{"data":{"items":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"required":["data"],"title":"PhotoListResponse","type":"object","x-struct":null,"x-validate":null}}},"description":"Photos"}},"summary":"List photos","tags":["photos"]},"post":{"callbacks":{},"operationId":"PWeb.PhotoController.create","parameters":[],"requestBody":{"content":{"multipart/form-data":{"schema":{"description":"Multipart payload accepting a single photo","properties":{"collection_id":{"description":"Optional ID of the collection to add the photo to","type":"integer","x-struct":null,"x-validate":null},"photo":{"description":"Image file to process","format":"binary","type":"string","x-struct":null,"x-validate":null}},"required":["photo"],"title":"PhotoUploadRequest","type":"object","x-struct":null,"x-validate":null}}},"description":"PhotoUploadRequest","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"description":"List of photos for the current user","properties":{"data":{"items":{"description":"A processed photo with accessible variants","properties":{"full_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null},"inserted_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null},"thumbnail_url":{"format":"uri","type":"string","x-struct":null,"x-validate":null},"title":{"type":"string","x-struct":null,"x-validate":null},"updated_at":{"format":"date-time","type":"string","x-struct":null,"x-validate":null}},"required":["id","title","thumbnail_url","full_url"],"title":"Photo","type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"required":["data"],"title":"PhotoListResponse","type":"object","x-struct":null,"x-validate":null}}},"description":"Uploaded photos"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null},"type":"object","x-struct":null,"x-validate":null}},"required":["errors"],"title":"ValidationErrors","type":"object","x-struct":null,"x-validate":null}}},"description":"Validation errors"}},"summary":"Upload a photo","tags":["photos"]}},"/api/user/me":{"get":{"callbacks":{},"operationId":"PWeb.UserController.me","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"description":"Response schema for a single user","properties":{"data":{"description":"A user account","properties":{"avatar_url":{"type":"string","x-struct":null,"x-validate":null},"email":{"type":"string","x-struct":null,"x-validate":null},"id":{"type":"integer","x-struct":null,"x-validate":null}},"required":["id","email"],"title":"User","type":"object","x-struct":null,"x-validate":null}},"required":["data"],"title":"UserResponse","type":"object","x-struct":null,"x-validate":null}}},"description":"Current user"}},"summary":"Get current user","tags":["user"]}}},"security":[],"servers":[{"url":"http://localhost:4000","variables":{}}],"tags":[]}
