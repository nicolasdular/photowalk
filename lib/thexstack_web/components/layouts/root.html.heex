<!DOCTYPE html>
<html
  lang="en"
  class="text-zinc-950 antialiased lg:bg-zinc-100 dark:bg-zinc-900 dark:text-white dark:lg:bg-zinc-950"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf-token" content={get_csrf_token()} />
    <title>The Stack</title>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />

    <%= if PhoenixVite.Components.has_vite_watcher?(ThexstackWeb.Endpoint) do %>
      <script type="module">
        // Build the correct dev server origin from Phoenix endpoint config
        const origin = "<%= static_url(@conn, "/") %>"
        const preamble = origin.replace(/\/$/, "") + "/@react-refresh"

        const mod = await import(preamble)
        mod.default.injectIntoGlobalHook(window)
        window.$RefreshReg$ = () => {}
        window.$RefreshSig$ = () => (type) => type
        window.__vite_plugin_react_preamble_installed__ = true
      </script>
    <% end %>

    <PhoenixVite.Components.assets
      names={["js/app.js", "css/app.css"]}
      manifest={{:thexstack, "priv/static/.vite/manifest.json"}}
      dev_server={PhoenixVite.Components.has_vite_watcher?(ThexstackWeb.Endpoint)}
      to_url={fn p -> static_url(@conn, p) end}
    />
  </head>
  <body>
    <div id="react-app"></div>
  </body>
</html>
